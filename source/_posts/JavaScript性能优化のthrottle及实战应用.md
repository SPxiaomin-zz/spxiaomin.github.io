---
title: JavaScript性能优化のthrottle及实战应用
date: 2017-02-14 21:20:12
categories: ['技术', '前端技术']
tags: ['javascript', '性能优化']
---

!!!未完成

## 需要节流(throttle)的缘由

浏览器中某些计算和处理要比其它的昂贵很多。比如，DOM操作比起非DOM交互需要更多的内存和CPU时间。连续尝试进行过多的DOM相关操作可能会导致浏览器挂起，有时候甚至会崩溃。尤其在IE中使用 onresize 事件处理程序的时候容易发生，当调整浏览器大小的时候，该事件会连续触发。在 onresize 事件处理程序内部如果尝试进行DOM操作，其高频率的更改可能会让浏览器崩溃。为了绕开这个问题，你可以使用定时器对该函数进行节流。

## 节流(throttle)背后的基本思想

函数节流背后的基本思想是指，某些代码不可以在没有间断的情况连续重复执行。第一次调用函数，创建一个定时器，在指定的时间间隔之后运行代码。当第二次调用该函数时，它会清除前一次的定时器并设置另一个。如果前一个定时器已经执行过了，这个操作就没有任何意义。然而，如果前一个定时器尚未执行，其实就是将其替换为一个新的定时器。目的是只有在执行函数的请求停止了一段时间之后才执行。

## 节流的使用方式

```javascript
function throttle(method, context) {
    clearTimeout(method.tId);
    method.tId = setTimeout(function () {
        method.call(context);
    }, 100); // 100 可以根据实际情况自己改成其他值
}
```

throttle() 函数接受两个参数: 要执行的函数以及在哪个作用域中执行。如果没有给出第二个参数，那么就在 `全局作用域内` 执行该方法。

## 节流的实战应用

{% codepen SPxiaomin WRLWEj 0 result 265 %}

## 参考

- JavaScript高级程序设计(第3版)
