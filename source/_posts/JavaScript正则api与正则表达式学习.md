---
title: JavaScript正则api与正则表达式学习
date: 2017-08-30 16:57:12
categories: ['技术', '前端技术']
tags: ['javascript']
---

## 正则定义

正则表达式，通俗点讲——

> 正则表达式是用来 **匹配(match)、捕获(capture)** 特定字符串的工具；之后，我们还可以对匹配到、捕获到的对象进行处理，比如 **替换(replace)**。

### 举例如下:

> 如果我们想将 07700 900166 变成 (077)0090-0166 的格式显示，那么我们该怎么做呢？如果有很多这样的工作需要做的话，我们该怎么做呢？手动一个个操作肯定是特别的麻烦。

其实可以通过如下方法进行操作——

```js
let tel = '07700 900166';
let pattern = /(\d{3})(\d{2}) (\d{2})(\d{4})/;
tel.replace(pattern, '($1)$2$3-$4');
```

仔细观察上面的正则表达式pattern，如果翻译成自然语言如下——

1. 用 `\d{3}\d{2} \d{2}\d{4}` **匹配** 电话号码，以便我们能在文档中搜索到所有能够匹配这个正则表达式的字符串；
2. 为了后面能够处理（即，替换），我们分别 **捕获** 了四段字符串: `(\d{3})(\d{2}) (\d{2})(\d{4})`；
3. 然后，我们用 `$1 ... $4` 来表示我们 **捕获到** 的字符串，然后用我们想要的拼接方式去 **替换** **匹配** 到的字符串: `($1)$2$3-$4`；

通过上面的例子，差不多了，这就是 "入门"，后面你要接着研究：

- 各种为了精确匹配所需要的 "符号"；
- 匹配同一个类型的字符串可能有很多种方法；
- 避免错误匹配其实并不容易……

<!-- more -->

## 正则表达式的写法

```js
/hello/g
```

两条斜线的中间是 **匹配模式** ，右边斜线的后面是 **修饰符**。

### 匹配模式

最简单的匹配模式就是直接输入想要匹配的东西，e.g. `/a/`。

但是要注意了，有些符号在特别的地方有特别的意思，e.g. `/./` 可以匹配除了换行符以外的任何东西。如果想要匹配这个符号的话，可以 **escape** 一下它，就是不让它有特别的意思，具体操作就是在符号前面加上反斜杠 `/\./`。

#### 字符集(Character Set)

在匹配模式中，我们可以去定义字符集，每个字符集中有可能要匹配的字符，匹配引擎会匹配字符集中的 **任意一个** 字符。

e.g.

```js
/[abc]/
// 匹配 a 或者 b 或者 c。

/[.]/
// 匹配 . ，这个特殊字符在字符集中不需要转义。如果不在字符集中，就匹配除了换行符以外的任何东西。

/[\[\]]/
// 有些字符在字符集中还是需要转义一下。

/[^abc]/
// 否定字符集，就是匹配的东西里面，不能够包含字符集里面出现的东西。
// 上面的例子匹配的东西不会出现 a 或者 b 或者 c。
```

## References

- [正则表达式极简“入门”](http://lixiaolai.com/2016/07/19/makecs-regular-expression/)
